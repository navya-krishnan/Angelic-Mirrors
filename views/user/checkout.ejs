<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
        content="Responsive Bootstrap4 Shop Template, Created by Imran Hossain from https://imransdesign.com/">

    <!-- title -->
    <title>Check Out</title>

    <style>
        .username-container {
            border: 1px solid #000;
            padding: 10px;
            display: inline-block;
            width: 100%;
        }

        .paymentMethod {
            margin-left: 5%;
        }
    </style>
    <!-- google font -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
    <!-- fontawesome -->
    <link rel="stylesheet" href="assets/css/all.min.css">
    <!-- bootstrap -->
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <!-- owl carousel -->
    <link rel="stylesheet" href="assets/css/owl.carousel.css">
    <!-- magnific popup -->
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <!-- animate css -->
    <link rel="stylesheet" href="assets/css/animate.css">
    <!-- mean menu css -->
    <link rel="stylesheet" href="assets/css/meanmenu.min.css">
    <!-- main style -->
    <link rel="stylesheet" href="assets/css/main.css">
    <!-- responsive -->
    <link rel="stylesheet" href="assets/css/responsive.css">

</head>

<body>

    <!--PreLoader-->
    <div class="loader">
        <div class="loader-inner">
            <div class="circle"></div>
        </div>
    </div>
    <!--PreLoader Ends-->

    <!-- header -->
    <div class="top-header-area" id="sticker">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-sm-12 text-center">
                    <div class="main-menu-wrap">
                        <!-- logo -->
                        <div class="site-logo">
                            <a href="/user/home">
                                <img src="/image/logo.png" alt="">
                            </a>
                        </div>
                        <!-- logo -->

                        <!-- menu start -->
                        <nav class="main-menu">
                            <ul>
                                <li class="current-list-item"><a href="/">Home</a>
                                </li>
                                <!-- <li><a href="about.html">About</a></li>
                                <li><a href="#">Pages</a>
                                    <ul class="sub-menu">
                                        <li><a href="404.html">404 page</a></li>
										<li><a href="about.html">About</a></li>
										<li><a href="cart.html">Cart</a></li>
										<li><a href="checkout.html">Check Out</a></li>
										<li><a href="contact.html">Contact</a></li>
										<li><a href="news.html">News</a></li>
                                        <li><a href="/user/shop.ejs">Shop</a></li>
                                    </ul>
                                </li> -->
                                <li><a href="/shop">Shop</a>

                                <li>
                                    <div class="header-icons">
                                        <a href="/wishlist"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
											fill="currentColor" class="bi bi-balloon-heart" viewBox="0 0 16 16">
											<path fill-rule="evenodd"
												d="m8 2.42-.717-.737c-1.13-1.161-3.243-.777-4.01.72-.35.685-.451 1.707.236 3.062C4.16 6.753 5.52 8.32 8 10.042c2.479-1.723 3.839-3.29 4.491-4.577.687-1.355.587-2.377.236-3.061-.767-1.498-2.88-1.882-4.01-.721zm-.49 8.5c-10.78-7.44-3-13.155.359-10.063q.068.062.132.129.065-.067.132-.129c3.36-3.092 11.137 2.624.357 10.063l.235.468a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.235-.468ZM6.013 2.06c-.649-.18-1.483.083-1.85.798-.131.258-.245.689-.08 1.335.063.244.414.198.487-.043.21-.697.627-1.447 1.359-1.692.217-.073.304-.337.084-.398" />
										</svg></a>

                                        <a class="shopping-cart" href="/cart"><i class="fas fa-shopping-cart"></i></a>
                                        <!-- <a class="mobile-hide search-bar-icon" href="#"><i
												class="fas fa-search"></i></a> -->

                                        <a href="/profile">
                                            <% if(loggedIn){%>
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                                                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
                                                    <path fill-rule="evenodd"
                                                        d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1" />
                                                </svg>
                                                <%}%>
                                        </a>

                                        <a href="/logout">
                                            <% if(loggedIn){%>

                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                    fill="currentColor" class="bi bi-box-arrow-right"
                                                    viewBox="0 0 16 16" style="color: white;">
                                                    <path fill-rule="evenodd"
                                                        d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0z" />
                                                    <path fill-rule="evenodd"
                                                        d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z" />
                                                </svg>

                                                <%}%>


                                        </a>
                                    </div>
                                </li>
                            </ul>
                        </nav>
                        <a class="mobile-show search-bar-icon" href="#"><i class="fas fa-search"></i></a>
                        <div class="mobile-menu"></div>
                        <!-- menu end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end header -->

    <!-- search area -->
    <!-- <div class="search-area">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<span class="close-btn"><i class="fas fa-window-close"></i></span>
					<div class="search-bar">
						<div class="search-bar-tablecell">
							<h3>Search For:</h3>
							<input type="text" placeholder="Keywords">
							<button type="submit">Search <i class="fas fa-search"></i></button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div> -->
    <!-- end search arewa -->

    <!-- breadcrumb-section -->
    <div class="breadcrumb-section breadcrumb-bg">
        <div class="container">
        </div>
    </div>
    <!-- end breadcrumb section -->

    <!-- check out section -->
    <div class="checkout-section mt-150 mb-150" style="margin-top: -10%;">
        <h3 style=" text-align: center; text-decoration: underline;">Order Checkout</h3>
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="checkout-accordion-wrap">
                        <div class="accordion" id="accordionExample">
                            <div class="card single-accordion">

                                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                                    data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="billing-address-form">
                                            <form action="index.html">
                                                <h5> Name:</h5>
                                                <p class="username-container">
                                                    <%= user.username %>
                                                </p>
                                                <h5> Email:</h5>
                                                <p class="username-container">
                                                    <%= user.email %>
                                                </p>
                                                <h5> Address:</h5>
                                                <% if (addresses.length> 0) { %>
                                                    <p class="username-container">
                                                        <%= addresses[0].name %> ,<br>
                                                            <%= addresses[0].address %>, <br>
                                                                <%= addresses[0].street %>, <%= addresses[0].city %>,
                                                                        <%= addresses[0].district %>, <br>
                                                                            <%= addresses[0].state %>, <%=
                                                                                    addresses[0].country %>,
                                                                                    <%= addresses[0].pincode %>,<br>
                                                                                        <%= addresses[0].phone %>
                                                    </p>
                                                    <% } else { %>
                                                        No address available
                                                        <% } %>


                                            </form>

                                        </div>

                                        <div class="d-flex mb-2" style="justify-content: start; margin-left: 3%;">
                                            <a href="/addAddress">
                                                <button type="button" class="btn btn-primary"
                                                    style="font-weight: bold;">
                                                    Add New Address
                                                </button>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="order-details-wrap">
                        <table class="order-details" style="width: 90%; margin-left: 5%;">
                            <thead>
                                <h4 style="text-align: center; text-decoration: underline; margin-top: 5%;">Your Order
                                </h4>
                            </thead>
                            <tbody class="order-details-body" style="margin-top: 5%; border: 2px solid #000000;">
                                <tr style="text-align: center;">
                                    <th>Product</th>
                                    <th>Total</th>
                                </tr>
                            </tbody>
                            <tbody class="checkout-details" style="border: 2px solid #000000;">
                                <% let cartTotal=0 %>
                                    <% cart.products.forEach((product)=>{ %>
                                        <tr>
                                            <td style="color: rgb(156, 6, 6);">
                                                <%= product.product.product_name %>
                                            </td>
                                            <td style="color: rgb(156, 6, 6);">
                                                <%= product.product.product_price %>
                                            </td>
                                        </tr>
                                        <% }) %>
                                            <tr>
                                                <% let subtotal=0; %>
                                                    <% cart.products.forEach((product)=> { %>
                                                        <% const productTotal=product.product.product_price *
                                                            product.quantity; %>
                                                            <% subtotal +=productTotal; %>
                                                                <% }); %>
                                                                    <td>Subtotal</td>
                                                                    <td>Rs. <%= subtotal %>
                                                                    </td>
                                            </tr>
                                            <% const shippingCost=100; %>
                                            <tr>
                                                <td>Cart Total</td>
                                                <td id="cartTotal">Rs. <%= subtotal + shippingCost %></td>
                                            </tr>
                                            <% if (coupon && coupon.discountAmount) { %>
                                                <tr>
                                                    <td>Coupon Amount</td>
                                                    <td id="discountAmount">Rs. <%= coupon.discountAmount.toFixed(2) %>
                                                    </td>
                                                </tr>
                                                <% } else { %>
                                                    <tr>
                                                        <td>Coupon Amount</td>
                                                        <td id="discountAmount">Rs. 0</td>
                                                    </tr>
                                                    <% } %>

                                                            <% const totalBeforeDiscount=subtotal + shippingCost; %>
                                                                <% const totalAfterDiscount=totalBeforeDiscount -
                                                                    (coupon && coupon.discountAmount ?
                                                                    coupon.discountAmount : 0); %>

                                                                    <tr>
                                                                        <td>Total</td>
                                                                        <td id="totalPrice">Rs. <%=
                                                                                totalAfterDiscount.toFixed(2) %>
                                                                        </td>
                                                                    </tr>
                            </tbody>
                        </table>

                        <form action="#" class="form-inline" style="margin-top: 5%;">
                            <div class="form-group mx-sm-3 mb-2">
                                <label for="inputPassword2" class="sr-only">Coupon</label>
                                <input type="text" class="form-control" id="couponCode" placeholder="Enter Coupon Code">
                            </div>
                            <button type="submit" id="applyCouponButton" class="btn btn-primary mb-2">Apply
                                Coupon</button>
                        </form>
                        <div class="payment" style="margin-top: 10%;">
                            <div>
                                <input type="radio" id="cod" class="paymentMethod" name="payment" value="cod">
                                <label for="cod">COD</label>
                            </div>
                            <div>
                                <input type="radio" id="online" class="paymentMethod" name="payment" value="online">
                                <label for="cod">Online</label>
                            </div>
                        </div>

                        <% if (addresses && addresses.length> 0) { %>
                            <a href="#" class="boxed-btn" id="placeOrderButton"
                                style="margin-bottom: 5%; margin-left: 35%;">Place Order</a>
                            <% } else { %>
                                <p>No address available</p>
                                <% } %>
                    </div>
                </div>

                <!-- address -->

                <% if (addresses && addresses.length> 0) { %>
                    <div class="row" id="viewAddress" style="margin-left: 1%; width: 100%; margin-top: 0%;">
                        <% addresses.forEach((address, index)=> { %>
                            <div class="col-md-4 mb-3">
                                <div class="card">
                                    <div class="card-header bg-dark text-white">
                                        <input type="radio" name="selectedAddress" value="<%= index %>">
                                        <label for="address_<%= index %>">
                                            <span class="ml-2">Address <%= index + 1 %></span>
                                        </label>
                                    </div>

                                    <div class="card-body">
                                        <% if (address && address.name) { %>
                                            <p id="address_<%= index %>">
                                                <%= address.name.charAt(0).toUpperCase() +
                                                    address.name.slice(1).toLowerCase() %>,
                                                    <%= address.address %>, <%= address.pincode %>, <%= address.district
                                                                %>,
                                                                <%= address.state %>, <%= address.country %><br>
                                                                        Phone: <%= address.phone %>
                                            </p>
                                            <% } else { %>
                                                <p class="card-title">No Address Available</p>
                                                <% } %>
                                    </div>

                                    <div class="d-flex" style="margin-left: 5%; margin-bottom: 3%;">
                                        <a href="/editAddress/<%= address._id %>">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                                <path
                                                    d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                                                <path fill-rule="evenodd"
                                                    d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z" />
                                            </svg>
                                        </a>
                                        <a href="/deleteAddress/<%= address._id %>" style="margin-left: 5%;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                                                <path
                                                    d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5" />
                                            </svg>
                                        </a>
                                    </div>
                                </div>


                            </div>
                            <% }) %>
                    </div>
                    <% } else { %>
                        <p>No address available</p>
                        <% } %>


                            <!-- coupon -->
                            <% if (coupon && coupon.length> 0) { %>
                                <div class="row" id="viewAddress" style="margin-left: 1%; width: 100%; margin-top: 0%;">
                                    <% coupon.forEach((coupons, index)=> { %>
                                        <div class="coupon-container"
                                            style="border: 1px solid black; height: fit-content; margin-left: 2%; width: 20%;">
                                            <h4 style=" text-align: center; margin-top: 10%;">Coupon Code is:</h4>
                                            <h5 style="text-align: center; padding-top: 0%;">
                                                <%= coupons.coupon_Name %>
                                            </h5>
                                            <p style="text-align: center;">For purchase between <br>
                                                <%= coupons.minimum_Amount %> and <%= coupons.maximum_Amount %>
                                            </p>
                                            <h5 style="text-align: center; padding-top: 0%; margin-bottom: 5%;">
                                                <%= coupons.coupon_Code %>
                                            </h5>
                                        </div>
                                        <% }) %>
                                </div>
                                <% } else { %>
                                    <p>No Coupon available</p>
                                    <% } %>

            </div>
        </div>
    </div>
    <!-- end check out section -->


    <!-- footer -->
    <div class="footer-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6">
                    <div class="footer-box about-widget">
                        <h2 class="widget-title">About us</h2>
                        <p>Discover the
                            Reflection of Perfection:
                            Collect Your Favourite
                            Mirrors Right Here!</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="footer-box get-in-touch">
                        <h2 class="widget-title">Get in Touch</h2>
                        <ul>
                            <li>angelicmirrors@gmail.com</li>
                            <li>+00 111 222 3333</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="footer-box pages">
                        <h2 class="widget-title">Pages</h2>
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li><a href="about.html">About</a></li>
                            <li><a href="services.html">Shop</a></li>
                            <li><a href="news.html">News</a></li>
                            <li><a href="contact.html">Contact</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="footer-box subscribe">
                        <h2 class="widget-title">Subscribe</h2>
                        <p>Subscribe to our mailing list to get the latest updates.</p>
                        <form action="index.html">
                            <input type="email" placeholder="Email">
                            <button type="submit"><i class="fas fa-paper-plane"></i></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end footer -->

    <!-- copyright -->
    <div class="copyright">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-12">
                    <p>Copyrights &copy; 2024 - Angelic Mirrors</a>, All Rights
                        Reserved.<br>
                    </p>
                </div>
                <div class="col-lg-6 text-right col-md-12">
                    <div class="social-icons">
                        <ul>
                            <li><a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a></li>
                            <li><a href="#" target="_blank"><i class="fab fa-twitter"></i></a></li>
                            <li><a href="#" target="_blank"><i class="fab fa-instagram"></i></a></li>
                            <li><a href="#" target="_blank"><i class="fab fa-linkedin"></i></a></li>
                            <li><a href="#" target="_blank"><i class="fab fa-dribbble"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end copyright -->


    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Add event listener for the placeOrderButton
            var placeOrderButton = document.getElementById('placeOrderButton');
            if (placeOrderButton) {
                placeOrderButton.addEventListener('click', function (event) {
                    event.preventDefault();

                    // Check if COD is selected
                    var codSelected = document.getElementById('cod').checked;
                    var onlineSelected = document.getElementById('online').checked;

                    // If any payment method is selected, proceed with placing the order
                    if (codSelected || onlineSelected) {
                        if (onlineSelected) {
                            initiateRazorpayPayment();
                        } else {
                            placeOrder('COD');
                        }
                    } else {
                        // If no payment method is selected, alert the user
                        alert('Please select a payment method.');
                    }
                });
            } else {
                console.error("Element with ID 'placeOrderButton' not found.");
            }

           
        async function initiateRazorpayPayment() {
            console.log("initiated");
            let totalPrice = document.getElementById('totalPrice').innerText;
            totalPrice = (totalPrice.replace("Rs. ", ""));
            console.log(totalPrice);

            // Check which payment method is selected
            var paymentMethod = document.querySelector('input[name="payment"]:checked').value;

            if (paymentMethod === 'online') {
                fetch('/razorpay', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        totalPrice: Math.round(Number(totalPrice) * 100)
                    })
                })
                    .then(response => response.json())
                    .then(order => {
                        var options = {
                            "key": "rzp_test_lSbwNbIgtUL14w",
                            "amount": Number(totalPrice) * 100,
                            "currency": "INR",
                            "name": "Angelic Mirrors",
                            "description": "Payment for your order",
                            "image": "",
                            "order_id": order.id,
                            "handler": function (response) {
                                console.log(response);
                                placeOrder('Online'); // Call function to place order after successful payment
                            },
                            "prefill": {
                                "name": "Customer Name",
                                "email": "customer@example.com",
                                "contact": "9999999999"
                            },
                            "theme": {
                                "color": "#3399cc"
                            }
                        };
                        var rzp1 = new Razorpay(options);
                        rzp1.open();
                    })
                    .catch(function (error) {
                        console.error('Payment failed', error);
                    });
            }
        }

        function placeOrder(paymentMethod) {
            // Fetch request to your server to place the order
            fetch('/getPlaceOrder', {
                method: 'post',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    userId: '<%= userId %>',
                    productId: '<%= productId %>',
                    paymentMethod: paymentMethod
                })
            })
                .then(response => {
                    if (response.ok) {
                        console.log('Order confirmed');
                        window.location.href = '/orderConfirm';
                    } else {
                        console.log('Failed to confirm order');
                        alert('Failed to confirm order. Please try again later.');
                    }
                })
                .catch((error) => {
                    console.log(error);
                    alert('An error occurred. Please try again later.');
                });
        }


         // Add event listener for the applyCouponButton
         var applyCouponButton = document.getElementById('applyCouponButton');
            if (applyCouponButton) {
                applyCouponButton.addEventListener('click', function () {
                    let couponCode = document.getElementById('couponCode').value;
                    let cartTotalText = document.getElementById('cartTotal').innerText;
                    console.log("Cart Total Text:", cartTotalText);
                    let cartTotal = parseFloat(cartTotalText.split('Rs. ')[1]);
                    console.log("Parsed Cart Total:", cartTotal);

                    if (isNaN(cartTotal)) {
                        console.error('Error: Cart total is not a valid number');
                        return;
                    }

                    fetch('/couponApply', {
                        method: 'post',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            couponCode: couponCode,
                            cartTotal: cartTotal
                        }),
                    })
                        .then(response => {
                            if (!response.ok) {
                                throw new Error("Network error")
                            }
                            return response.json();
                        })
                        .then(data => {
                            if (typeof data.discountAmount !== 'number') {
                                data.discountAmount = Number(data.discountAmount);

                                const discountAmountElement = document.getElementById('discountAmount');
                                if (discountAmountElement) {
                                    discountAmountElement.textContent = `Rs. ${data.discountAmount.toFixed(2)}`;
                                } else {
                                    console.error("Element with ID 'discountAmount' not found.");
                                }
                                console.log(discountAmountElement,"discount");
                            } else {
                                console.error("Invalid discount amount data:", data.discountAmount);
                            }


                            if (typeof data.total !== 'number') {
                                data.total = Number(data.total);

                                const total = document.getElementById('totalPrice');
                                console.log(total,'to');
                                total.textContent = `Rs. ${data.total.toFixed(2)}`;
                            }

                            console.log(data.couponId, "couponid");
                            couponIds = data.couponId
                        })
                        .catch(error => {
                            console.error('Error:', error);
                        });
                });
            } else {
                console.error("Element with ID 'applyCouponButton' not found.");
            }
        });
        
    </script>

    <!-- jquery -->
    <script src="assets/js/jquery-1.11.3.min.js"></script>
    <!-- bootstrap -->
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <!-- count down -->
    <script src="assets/js/jquery.countdown.js"></script>
    <!-- isotope -->
    <script src="assets/js/jquery.isotope-3.0.6.min.js"></script>
    <!-- waypoints -->
    <script src="assets/js/waypoints.js"></script>
    <!-- owl carousel -->
    <script src="assets/js/owl.carousel.min.js"></script>
    <!-- magnific popup -->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <!-- mean menu -->
    <script src="assets/js/jquery.meanmenu.min.js"></script>
    <!-- sticker js -->
    <script src="assets/js/sticker.js"></script>
    <!-- main js -->
    <script src="assets/js/main.js"></script>

</body>

</html>